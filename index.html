<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="ハートピア 曲リスト（公開）" />
  <title>ハートピア 曲リスト</title>

  <style>
    :root{
      /* Pastel theme */
      --bg:#fbfbff;
      --card:#ffffffcc;
      --text:#243047;
      --muted:#6a7898;
      --line: rgba(36,48,71,.10);

      --accent:#7aa7ff;

      --ok:#67d9b7;
      --warn:#ffd27a;
      --bad:#ff8fb0;

      --chip: rgba(36,48,71,.06);

      --shadow: 0 12px 30px rgba(36,48,71,.10);
      --radius: 18px;
      --radius2: 14px;

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Sans", "Hiragino Kaku Gothic ProN", Meiryo, Arial, sans-serif;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:
        radial-gradient(900px 520px at 10% 0%, rgba(255, 184, 208,.55), transparent 60%),
        radial-gradient(900px 520px at 90% 10%, rgba(186, 224, 255,.60), transparent 60%),
        radial-gradient(900px 520px at 20% 90%, rgba(200, 255, 226,.55), transparent 60%),
        radial-gradient(900px 520px at 80% 95%, rgba(255, 240, 188,.55), transparent 60%),
        var(--bg);
    }
    a{color:inherit}
    .wrap{max-width:1100px; margin:0 auto; padding:28px 16px 50px;}
    header{
      display:flex; gap:14px; align-items:flex-end; justify-content:space-between;
      padding:8px 2px 18px;
    }
    .title{display:flex; flex-direction:column; gap:6px;}
    h1{margin:0; font-size:28px; letter-spacing:.02em}
    .sub{color:var(--muted); font-size:13px}

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.75));
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(10px);
    }

    .controls{
      display:grid;
      grid-template-columns: 1.4fr .7fr .7fr auto;
      gap:10px;
      padding:14px;
      border-bottom:1px solid var(--line);
      background: linear-gradient(90deg, rgba(255,184,208,.20), rgba(186,224,255,.18), rgba(200,255,226,.16));
    }
    @media (max-width: 860px){ .controls{grid-template-columns: 1fr 1fr;} }
    @media (max-width: 520px){
      .controls{grid-template-columns: 1fr;}
      header{flex-direction:column; align-items:flex-start}
    }

    .field{display:flex; flex-direction:column; gap:6px;}
    label{font-size:12px; color:var(--muted)}

    input[type="search"], select{
      width:100%;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(36,48,71,.12);
      background: rgba(255,255,255,.75);
      color:var(--text);
      outline:none;
    }
    input[type="search"]::placeholder{color:rgba(106,120,152,.75)}
    input[type="search"]:focus, select:focus{
      border-color: rgba(122,167,255,.55);
      box-shadow: 0 0 0 4px rgba(122,167,255,.18);
    }

    .toggle{
      display:flex; align-items:center; gap:10px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(36,48,71,.12);
      background: rgba(255,255,255,.75);
      user-select:none;
      cursor:pointer;
    }
    .toggle input{accent-color: var(--accent); transform: translateY(1px);}

    .stats{
      display:flex; align-items:center; justify-content:flex-end; gap:10px;
      padding:0 14px 12px;
      color:var(--muted);
      font-size:13px;
    }

    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px;
      border-radius:999px;
      background:rgba(255,255,255,.7);
      border:1px solid rgba(36,48,71,.10);
      color:var(--text);
      font-size:12px;
      white-space:nowrap;
      box-shadow: 0 8px 18px rgba(36,48,71,.08);
    }

    .dot{width:8px;height:8px;border-radius:50%;}
    .dot.ok{background:var(--ok)}
    .dot.warn{background:var(--warn)}
    .dot.bad{background:var(--bad)}

    .tableWrap{overflow:auto;}
    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0;
      min-width:820px;
      font-size:14px;
    }
    thead th{
      position:sticky; top:0;
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(12px);
      border-bottom:1px solid var(--line);
      text-align:left;
      padding:12px 12px;
      color:var(--muted);
      font-weight:700;
      cursor:pointer;
      user-select:none;
      white-space:nowrap;
    }
    thead th .sort{
      font-family:var(--mono);
      font-size:12px;
      opacity:.9;
      margin-left:6px;
    }
    tbody td{
      padding:12px 12px;
      border-bottom:1px solid var(--line);
      vertical-align:top;
    }
    tbody tr:hover{background:rgba(122,167,255,.08)}

    .col-title{font-weight:700}
    .muted{color:var(--muted)}

    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(36,48,71,.10);
      background: rgba(255,255,255,.70);
      font-size:12px;
      box-shadow: 0 8px 18px rgba(36,48,71,.08);
    }
    .status-public .dot{background:var(--ok)}
    .status-private .dot{background:var(--bad)}
    .status-wip .dot{background:var(--warn)}

    footer{
      margin-top:14px;
      color:var(--muted);
      font-size:12px;
      padding:0 4px;
    }
    .kbd{
      font-family:var(--mono);
      padding:.12em .45em;
      border:1px solid rgba(36,48,71,.14);
      border-bottom-width:2px;
      border-radius:10px;
      background:rgba(255,255,255,.70);
      color:var(--text);
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="title">
        <h1>ハートピア　曲リスト</h1>
        <div class="sub">検索・分類フィルタ・ヘッダクリックで並び替え（静的サイト）</div>
      </div>
      <div class="chip" title="このページは1ファイルで動作します">
        <span class="dot ok"></span> Static
      </div>
    </header>

    <section class="card" aria-label="曲リスト">
      <div class="controls">
        <div class="field">
          <label for="q">検索（タイトル / 和名 / 分類）</label>
          <input id="q" type="search" placeholder="例: Undertale / ノクターン / ゼルダ" autocomplete="off" />
        </div>
        <div class="field">
          <label for="category">分類</label>
          <select id="category">
            <option value="">すべて</option>
          </select>
        </div>
        <div class="field">
          <label for="status">ステータス</label>
          <select id="status">
            <option value="">すべて</option>
            <option value="公開">公開</option>
            <option value="非公開">非公開</option>
            <option value="準備中">準備中</option>
          </select>
        </div>
        <label class="toggle" title="公開だけに絞り込み">
          <input id="onlyPublic" type="checkbox" checked />
          公開のみ表示
        </label>
      </div>

      <div class="stats" id="stats"></div>

      <div class="tableWrap">
        <table>
          <thead>
            <tr>
              <th data-key="title">タイトル<span class="sort" id="sort-title"></span></th>
              <th data-key="jp">和名<span class="sort" id="sort-jp"></span></th>
              <th data-key="category">分類<span class="sort" id="sort-category"></span></th>
              <th data-key="status">ステータス<span class="sort" id="sort-status"></span></th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
    </section>

    <footer>
      <div>操作: 検索欄で絞り込み / 分類・ステータスでフィルタ / ヘッダクリックで昇順・降順。</div>
      <div>ヒント: <span class="kbd">Ctrl</span> + <span class="kbd">F</span> でも検索できます。</div>
    </footer>
  </div>

  <script>
    // ===== データ（ここだけ編集すればOK） =====
    const songs = [
      { title: "Nocturne Op.9 No.2", jp: "ノクターン Op.9-2", category: "クラシック", status: "公開" },
      { title: "Turkish March", jp: "トルコ行進曲", category: "クラシック", status: "公開" },
      { title: "Joy of Man's Desiring", jp: "主よ、人の望みの喜びよ", category: "クラシック", status: "公開" },
      { title: "La Campanella", jp: "ラ・カンパネラ", category: "クラシック", status: "公開" },
      { title: "Widmung", jp: "献呈", category: "クラシック", status: "公開" },
      { title: "Valse du Petit Chien", jp: "子犬のワルツ", category: "クラシック", status: "公開" },
      { title: "Liebestraum No.3", jp: "愛の夢", category: "クラシック", status: "公開" },
      { title: "Fùr Elise", jp: "エリーゼのために", category: "クラシック", status: "公開" },
      { title: "Piano Sonata K.545", jp: "ピアノソナタ K.545", category: "クラシック", status: "公開" },
      { title: "Canon in D", jp: "カノン", category: "クラシック", status: "公開" },

      { title: "Rito Village", jp: "リトの村", category: "ゼルダの伝説", status: "公開" },
      { title: "Ballad of the Goddess", jp: "女神の詩", category: "ゼルダの伝説", status: "公開" },
      { title: "Zelda's Lullaby", jp: "ゼルダの子守歌", category: "ゼルダの伝説", status: "公開" },
      { title: "Full Steam Ahead!", jp: "全速前進！", category: "ゼルダの伝説", status: "公開" },

      { title: "One Summer's Day", jp: "あの夏へ", category: "ジブリ", status: "公開" },
      { title: "The Promise of the World", jp: "世界の約束", category: "ジブリ", status: "公開" },
      { title: "Country Roads", jp: "カントリー・ロード", category: "ジブリ", status: "公開" },
      { title: "Ashitaka and San", jp: "アシタカとサン", category: "ジブリ", status: "公開" },
      { title: "Ashitaka Sekki", jp: "アシタカせっ記", category: "ジブリ", status: "公開" },
      { title: "The Wind Forest", jp: "風の通り道", category: "ジブリ", status: "公開" },
      { title: "The Song of Teru", jp: "テルーの唄", category: "ジブリ", status: "公開" },
      { title: "Become the Wind", jp: "風になる", category: "ジブリ", status: "公開" },

      { title: "Once Upon a Time", jp: "むかしむかし…", category: "Undertale", status: "公開" },
      { title: "Your Best Friend", jp: "キミの親友", category: "Undertale", status: "公開" },
      { title: "Fallen Down", jp: "おちてきた子", category: "Undertale", status: "公開" },
      { title: "Ruins", jp: "いせき", category: "Undertale", status: "公開" },
      { title: "Enemy Approaching", jp: "Enemy Approaching!", category: "Undertale", status: "公開" },
      { title: "Determination", jp: "ケツイ", category: "Undertale", status: "公開" },
      { title: "Ghost Fight", jp: "ゴースト・ファイト", category: "Undertale", status: "公開" },
      { title: "Stronger Monsters", jp: "強敵たち", category: "Undertale", status: "公開" },
      { title: "Home", jp: "ホーム", category: "Undertale", status: "公開" },
      { title: "Heartache", jp: "心の痛み", category: "Undertale", status: "公開" },
      { title: "Sans", jp: "サンズ", category: "Undertale", status: "公開" },
      { title: "Nyeh Heh Heh!", jp: "ニャハハ！", category: "Undertale", status: "公開" },
      { title: "Dogsong", jp: "ドッグソング", category: "Undertale", status: "公開" },
      { title: "Uwa!! So Temperate", jp: "おだやかだワン！", category: "Undertale", status: "公開" },
      { title: "Bonetrousle", jp: "Bonetrousle", category: "Undertale", status: "公開" },
      { title: "Snowy", jp: "雪景色", category: "Undertale", status: "公開" },
      { title: "Showdin Town", jp: "スノーフルのまち", category: "Undertale", status: "公開" },
      { title: "Shop", jp: "いらっしゃいませ", category: "Undertale", status: "公開" },
      { title: "Dating Start!", jp: "Date Start!", category: "Undertale", status: "公開" },
      { title: "Spear of Justice", jp: "正義の槍", category: "Undertale", status: "公開" },
      { title: "True Hero", jp: "本物のヒーローとの戦い", category: "Undertale", status: "公開" },

      { title: "IRIS OUT", jp: "IRIS OUT", category: "", status: "公開" },
      { title: "Suzume", jp: "すずめ", category: "", status: "公開" },
      { title: "The Roost", jp: "喫茶ハトの巣", category: "", status: "公開" },
      { title: "Summer", jp: "Summer", category: "", status: "公開" },
    ];

    // ===== UIロジック =====
    const els = {
      q: document.getElementById("q"),
      category: document.getElementById("category"),
      status: document.getElementById("status"),
      onlyPublic: document.getElementById("onlyPublic"),
      tbody: document.getElementById("tbody"),
      stats: document.getElementById("stats"),
      ths: Array.from(document.querySelectorAll("thead th[data-key]")),
    };

    // 分類リスト生成（空は除外）
    const categories = [...new Set(songs.map(s => (s.category || "").trim()).filter(Boolean))]
      .sort((a,b)=>a.localeCompare(b,"ja"));
    for (const c of categories){
      const opt = document.createElement("option");
      opt.value = c;
      opt.textContent = c;
      els.category.appendChild(opt);
    }

    let sortKey = "category";
    let sortDir = "asc"; // asc | desc

    function normalize(str){
      return (str ?? "").toString().toLowerCase();
    }

    // カテゴリごとにパステル色を割り当て
    function hashHue(str){
      let h = 0;
      for (let i = 0; i < str.length; i++) h = (h * 31 + str.charCodeAt(i)) >>> 0;
      return h % 360;
    }
    function pastelForCategory(category){
      const c = (category || "other").trim() || "other";
      const hue = hashHue(c);
      const bg = `hsl(${hue} 75% 92%)`;
      const border = `hsl(${hue} 55% 80%)`;
      const text = `hsl(${hue} 35% 28%)`;
      return { bg, border, text };
    }

    function statusBadge(status){
      const s = (status || "").trim();
      let cls = "status-public";
      if (s === "非公開") cls = "status-private";
      if (s === "準備中") cls = "status-wip";
      return `<span class="badge ${cls}"><span class="dot"></span>${escapeHtml(s || "-")}</span>`;
    }

    function escapeHtml(str){
      return (str ?? "").toString()
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function applyFilters(){
      const q = normalize(els.q.value).trim();
      const cat = (els.category.value || "").trim();
      const st = (els.status.value || "").trim();
      const onlyPub = els.onlyPublic.checked;

      let rows = songs.slice();

      if (onlyPub) rows = rows.filter(s => (s.status || "").trim() === "公開");
      if (cat) rows = rows.filter(s => (s.category || "").trim() === cat);
      if (st) rows = rows.filter(s => (s.status || "").trim() === st);

      if (q){
        rows = rows.filter(s => {
          const hay = `${s.title} ${s.jp} ${s.category} ${s.status}`;
          return normalize(hay).includes(q);
        });
      }

      rows.sort((a,b)=>{
        const av = (a[sortKey] ?? "").toString();
        const bv = (b[sortKey] ?? "").toString();
        const cmp = av.localeCompare(bv, "ja", { numeric:true, sensitivity:"base" });
        return sortDir === "asc" ? cmp : -cmp;
      });

      render(rows);
      renderStats(rows.length);
      renderSortIndicators();
    }

    function render(rows){
      els.tbody.innerHTML = rows.map(s => `
        <tr>
          <td class="col-title">${escapeHtml(s.title || "-")}</td>
          <td>${escapeHtml(s.jp || "-")}</td>
          <td>${
            s.category
              ? (() => {
                  const p = pastelForCategory(s.category);
                  return `<span class="chip" style="background:${p.bg};border-color:${p.border};color:${p.text}">
                    ${escapeHtml(s.category)}
                  </span>`;
                })()
              : `<span class="muted">-</span>`
          }</td>
          <td>${statusBadge(s.status)}</td>
        </tr>
      `).join("");
    }

    function renderStats(visible){
      const total = songs.length;
      els.stats.innerHTML = `
        <span class="chip" title="表示件数 / 全件数">
          <span class="dot ok"></span> ${visible} / ${total} 件
        </span>
        <span class="chip" title="並び替え">
          Sort: ${escapeHtml(sortKey)} (${escapeHtml(sortDir)})
        </span>
      `;
    }

    function renderSortIndicators(){
      for (const th of els.ths){
        const key = th.dataset.key;
        const el = document.getElementById(\`sort-\${key}\`);
        if (!el) continue;
        el.textContent = (key === sortKey) ? (sortDir === "asc" ? "↑" : "↓") : "";
      }
    }

    // イベント
    els.q.addEventListener("input", applyFilters);
    els.category.addEventListener("change", applyFilters);
    els.status.addEventListener("change", applyFilters);
    els.onlyPublic.addEventListener("change", applyFilters);

    els.ths.forEach(th => {
      th.addEventListener("click", () => {
        const key = th.dataset.key;
        if (sortKey === key) sortDir = (sortDir === "asc" ? "desc" : "asc");
        else { sortKey = key; sortDir = "asc"; }
        applyFilters();
      });
    });

    // 初期表示
    applyFilters();
  </script>
</body>
</html>
